<?xml version="1.0" encoding="UTF-8" ?> <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.quygt.dkcs.dao.UserDao">

    <sql id="base_column_list">
        <trim prefix="WHERE" prefixOverrides="AND">
            1=1
            <if test="id>0">AND id=#{id}</if>
            <if test="userName!= null and userName!=''">AND userName=#{userName}</if>
            <if test="passWord!= null and passWord!=''">AND passWord=#{passWord}</if>
            <if test="realName!= null and realName!=''">AND realName=#{realName}</if>
            <if test="picUrl!= null and picUrl!=''">AND picUrl=#{picUrl}</if>
            <if test="sex>0">AND sex=#{sex}</if>
            <if test="mobile!= null and mobile!=''">AND mobile=#{mobile}</if>
            <if test="loginCount>0">AND loginCount=#{loginCount}</if>
            <if test="state>0">AND state=#{state}</if>
            <if test="lastLoginTime!=null">AND lastLoginTime=#{lastLoginTime}</if>
            <if test="createTime!=null">AND createTime=#{createTime}</if>
            <if test="channelId!=null and channelId>0">AND channelId=#{channelId}</if>
            <if test="channelName!=null">AND channelName=#{channelName}</if>
            <if test="startTime!=null and startTime!=''">
                AND createTime &gt;= concat(#{startTime}," 00:00:00")
            </if>
            <if test="endTime!=null and endTime !=''">
                AND createTime &lt;= concat(#{endTime}," 23:59:59")</if>
        </trim>
    </sql>

    <select id="getUserByMobile" parameterType="java.lang.String" resultType="User">
        SELECT * FROM fdcs_user WHERE mobile=#{mobile}
    </select>

    <select id="getById" parameterType="java.lang.Long" resultType="User">
        SELECT * FROM fdcs_user WHERE id=#{id}
    </select>

    <select id="getUserByAccount" resultType="User">
        SELECT * FROM fdcs_user WHERE userName=#{userName} AND passWord=#{passWord}
    </select>

    <insert id="insert" parameterType="User" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO fdcs_user
        (
        userName,
        `passWord`,
        realName,
        picUrl,
        sex,
        mobile,
        loginCount,
        state,
        <if test="lastLoginTime!=null and lastLoginTime!=''">
            lastLoginTime,
        </if>
        <if test="channelId!=null and channelId!=''">
            channelId,
        </if>
        <if test="channelName!=null and channelName!=''">
            channelName,
        </if>
        createTime
        ) VALUES (
        #{userName},
        #{passWord},
        #{realName},
        #{picUrl},
        #{sex},
        #{mobile},
        #{loginCount},
        #{state},
        <if test="lastLoginTime!=null and lastLoginTime!=''">
            #{lastLoginTime},
        </if>
        <if test="channelId!=null and channelId!=''">
            #{channelId},
        </if>
        <if test="channelName!=null and channelName!=''">
            #{channelName},
        </if>
        #{createTime}
        )
    </insert>

    <update id="update" parameterType="User">
        UPDATE fdcs_user
        <trim prefix="SET" suffixOverrides=",">
            <if test="userName!= null">userName=#{userName},</if>
            <if test="passWord!= null">passWord=#{passWord},</if>
            <if test="realName!= null">realName=#{realName},</if>
            <if test="picUrl!= null">picUrl=#{picUrl},</if>
            <if test="sex!= null">sex=#{sex},</if>
            <if test="mobile!= null">mobile=#{mobile},</if>
            <if test="loginCount!= null">loginCount=#{loginCount},</if>
            <if test="state!= null">state=#{state},</if>
            <if test="lastLoginTime!= null">lastLoginTime=#{lastLoginTime},</if>
            <if test="channelId!= null">channelId=#{channelId},</if>
            <if test="channelName!= null">channelName=#{channelName},</if>
        </trim>
        WHERE id=#{id}
    </update>

    <select id="getlist" resultType="User">
        SELECT * FROM fdcs_user
        <include refid="base_column_list" />
        ORDER BY id DESC
    </select>

    <select id="selectListAll" resultType="User" parameterType="User">
        SELECT userName,realName,sex,mobile,loginCount,lastLoginTime,createTime,state FROM fdcs_user
        <include refid="base_column_list" />
        ORDER BY id DESC
    </select>

    <select id="getmodel" resultType="User">
        SELECT * FROM fdcs_user
        <trim prefix="WHERE" prefixOverrides="AND">
            1=1
            <if test="id>0">AND id=#{id}</if>
            <if test="userName!= null and userName!=''">AND userName=#{userName}</if>
            <if test="passWord!= null and passWord!=''">AND passWord=#{passWord}</if>
            <if test="realName!= null and realName!=''">AND realName=#{realName}</if>
            <if test="picUrl!= null and picUrl!=''">AND picUrl=#{picUrl}</if>
            <if test="sex>0">AND sex=#{sex}</if>
            <if test="mobile!= null and mobile!=''">AND mobile=#{mobile}</if>
            <if test="loginCount>0">AND loginCount=#{loginCount}</if>
            <if test="state>0">AND state=#{state}</if>
            <if test="lastLoginTime!=null">AND lastLoginTime=#{lastLoginTime}</if>
            <if test="createTime!=null">AND createTime=#{createTime}</if>
            <if test="channelId!=null and channelId>0">AND channelId=#{channelId}</if>
            <if test="channelName!=null">AND channelName=#{channelName}</if>
        </trim>
        limit 0,1
    </select>
</mapper>